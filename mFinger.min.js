!function(t,i){"use strict";var e=function(){function t(t,i,e){return t.addEventListener(i,e,!1)}function i(t,i,e,s){var h=t-e,o=i-s;return Math.abs(h)>=Math.abs(o)?h>0?"left":"right":o>0?"up":"down"}function e(t,i){return Math.sqrt(t*t+i*i)}function s(t,i){var s=t.x*i.y-i.x*t.y,h=e(t.x,t.y)*e(i.x,i.y);if(0===h)return 0;var o=t.x*i.x+t.y*i.y,n=o/h;return n>1&&(n=1),-1>n&&(n=-1),Math.acos(n)*(s>0?-1:1)*180/Math.PI}return{on:t,getDirection:i,getDistance:e,getRotateAngle:s}}(),s=function(t,s){this.el="string"==typeof t?i.querySelector(t):t,s=s||{},this.stop=s.stop===!1?!1:!0,this.prevent=s.prevent===!1?!1:!0,this.tap=s.tap||function(){},this.doubleTap=s.doubleTap||function(){},this.longTap=s.longTap||function(){},this.pressMove=s.pressMove||function(){},this.swipe=s.swipe||function(){},this.pinch=s.pinch||function(){},this.rotate=s.rotate||function(){},this._events={},this.touchVector=null,this.touchDistance=0,this.previousTouchTime=0,this.previousTouchPoint=null,this.tapTimeout=null,this.longTapTimeout=null,this.initScale=1,e.on(this.el,"touchstart",this._start.bind(this)),e.on(this.el,"touchmove",this._move.bind(this)),e.on(this.el,"touchend",this._end.bind(this)),e.on(this.el,"touchcancel",this._end.bind(this)),this._init()};s.prototype={_init:function(){this.$on("tap",this.tap),this.$on("doubleTap",this.doubleTap),this.$on("longTap",this.longTap),this.$on("pressMove",this.pressMove),this.$on("swipe",this.swipe),this.$on("pinch",this.pinch),this.$on("rotate",this.rotate)},_start:function(t){t.touches&&(this.stop&&t.stopPropagation(),this.prevent&&t.preventDefault(),this._clearLongTapTimeout(),this._reset(),this.startTime=Date.now(),this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY,t.touches.length>1?(this.touchVector={x:t.touches[1].pageX-this.startX,y:t.touches[1].pageY-this.startY},this.touchDistance=e.getDistance(this.touchVector.x,this.touchVector.y)):(this.longTapTimeout=setTimeout(function(){this._trigger("longTap",t)}.bind(this),750),this.previousTouchPoint&&Math.abs(this.startX-this.previousTouchPoint.startX)<10&&Math.abs(this.startY-this.previousTouchPoint.startY)<10&&this.startTime-this.previousTouchTime<250&&(this.isDoubleTap=!0),this.previousTouchTime=this.startTime,this.previousTouchPoint={startX:this.startX,startY:this.startY}))},_move:function(t){if(t.touches){this.stop&&t.stopPropagation(),this.prevent&&t.preventDefault(),this._clearLongTapTimeout();var i=t.touches[0].pageX,s=t.touches[0].pageY;if(t.touches.length>1){if(null!==this.touchVector){var h={x:t.touches[1].pageX-i,y:t.touches[1].pageY-s},o=e.getDistance(h.x,h.y);if(this.touchDistance>0){var n=o/this.touchDistance;t.ratio=n-this.initScale,this._trigger("pinch",t),this.initScale=n}var a=e.getRotateAngle(h,this.touchVector);t.angle=a,this._trigger("rotate",t),this.touchVector.x=h.x,this.touchVector.y=h.y}}else this.deltaX=null===this.moveX?0:i-this.moveX,this.deltaY=null===this.moveY?0:s-this.moveY,t.deltaX=this.deltaX,t.deltaY=this.deltaY,this._trigger("pressMove",t);this.moveX=i,this.moveY=s}},_end:function(t){if(t.changedTouches){var i=Date.now();if(this._clearLongTapTimeout(),null!==this.moveX&&Math.abs(this.moveX-this.startX)>10||null!==this.moveY&&Math.abs(this.moveY-this.startY)>10)i-this.startTime<300&&(t.deltaX=this.deltaX,t.deltaY=this.deltaY,t.direction=e.getDirection(this.startX,this.startY,this.moveX,this.moveY),this._trigger("swipe",t));else{if(i-this.startTime>500)return;this.isDoubleTap?(this.isDoubleTap=!1,this.tapTimeout&&clearTimeout(this.tapTimeout),this._trigger("doubleTap",t)):this.tapTimeout=setTimeout(function(){this._trigger("tap",t)}.bind(this),250)}}},_reset:function(){this.moveX=null,this.moveY=null,this.deltaX=0,this.deltaY=0},_clearLongTapTimeout:function(){this.longTapTimeout&&clearTimeout(this.longTapTimeout)},_trigger:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;e>i;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},$on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},$off:function(t,i){if(this._events[t]){var e=this._events[t].indexOf(i);e>-1&&this._events[t].splice(e,1)}}},"function"==typeof define&&(define.amd||define.cmd)?define("mFinger",[],function(){return s}):t.mFinger=s}(window,document);